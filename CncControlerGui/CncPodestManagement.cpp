#include <wx/gdicmn.h>
#include <wx/richtooltip.h>
#include "GlobalFunctions.h"
#include "MainFrameProxy.h"
#include "CncControl.h"
#include "CncPodestManagement.h"

///////////////////////////////////////////////////////////////////
CncPodestManagement::CncPodestManagement(wxWindow* parent)
: CncPodestManagementBase				(parent)
, CncPodestMgmtMovement::Interface		()
, movement								(NULL)
///////////////////////////////////////////////////////////////////
{
	movement = new CncPodestMgmtMovement(this); 
	GblFunc::replaceControl(m_panelMovementPlaceholder, movement);
	movement->setCallbackInterface(this);
}
///////////////////////////////////////////////////////////////////
CncPodestManagement::~CncPodestManagement() {
///////////////////////////////////////////////////////////////////
	wxDELETE(movement);
}
///////////////////////////////////////////////////////////////////
void CncPodestManagement::podestNotifyEnable(bool state) {
///////////////////////////////////////////////////////////////////
	m_btClose->Enable(state);
}
///////////////////////////////////////////////////////////////////
void CncPodestManagement::podestNotifyInit(bool state) {
///////////////////////////////////////////////////////////////////
}
///////////////////////////////////////////////////////////////////
void CncPodestManagement::podestNotifyClose(bool state) {
///////////////////////////////////////////////////////////////////
}
///////////////////////////////////////////////////////////////////
void CncPodestManagement::showInfo() {
///////////////////////////////////////////////////////////////////
	wxRichToolTip tip(	"Additional information", 
						"While this dialog is shown, the corresponding hardware buttons are active."
					  );
	
	tip.SetIcon(wxICON_INFORMATION);
	tip.SetTipKind(wxTipKind_TopLeft);
	tip.ShowFor(m_info);
}
///////////////////////////////////////////////////////////////////
void CncPodestManagement::onShow(wxShowEvent& event) {
///////////////////////////////////////////////////////////////////
}
///////////////////////////////////////////////////////////////////
void CncPodestManagement::onInit(wxInitDialogEvent& event) {
///////////////////////////////////////////////////////////////////
	if ( movement->init() == false ) {
		Show(false);
		return;
	}
	
	showInfo();
}
///////////////////////////////////////////////////////////////////
void CncPodestManagement::onClose(wxCommandEvent& event) {
///////////////////////////////////////////////////////////////////
	movement->close();
	Show(false);
}
///////////////////////////////////////////////////////////////////
void CncPodestManagement::onLefDownInfo(wxMouseEvent& event) {
///////////////////////////////////////////////////////////////////
	showInfo();
}
